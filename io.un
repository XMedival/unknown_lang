fn open(path, mode)
    fd = 0
    asm
        mov rax, 2
        mov rdi, $path
        mov rsi, $mode
        syscall
        mov $fd, rax
    end
    ret fd
end

fn close(fd)
    asm
        mov rax, 3
        mov rdi, $fd
        syscall
    end
    ret 0
end

fn read(fd, buf, size)
    bytes_read = 0
    asm
        mov rax, 0
        mov rdi, $fd
        mov rsi, $buf
        mov rdx, $size
        syscall
        mov $bytes_read, rax
    end
    ret bytes_read
end
